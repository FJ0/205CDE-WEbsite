{"filter":false,"title":"formstest.html","tooltip":"/formstest.html","undoManager":{"mark":2,"position":2,"stack":[[{"start":{"row":0,"column":0},"end":{"row":48,"column":0},"action":"insert","lines":["# Added code start ","import sqlite3 ","from flask import g","","DATABASE = './database.db'","","","def connect_to_database():","    db = sqlite3.connect(DATABASE)","    ","    with db:","        db.execute('CREATE TABLE if not exists messages(pkey integer primary key, firstname ,lastname ,number ,email ,message)')","    return db","","def get_db():","    db = getattr(g, '_database', None)","    if db is None:","        db = g._database = connect_to_database()","    return db","","@app.teardown_appcontext","def close_connection(exception):","    db = getattr(g, '_database', None)","    if db is not None:","        db.close()","","@app.route('/contact.html', methods=['GET', 'POST'])","def contact():","    ","    if request.method == 'GET':","        return render_template('contact.html')","","    firstname = request.form['firstname']","    lastname = request.form['lastname']","    number = request.form['number']","    email = request.form['email']","    message = request.form['message']","    ","","    db = get_db()","    ","    with db:","        db.execute('INSERT INTO messages(firstname,lastname,number, email, message)VALUES(?,?,?,?,?)', (firstname,lastname,number,email,message))","","    return redirect('ThankYou.html')","","","",""],"id":1}],[{"start":{"row":0,"column":0},"end":{"row":46,"column":0},"action":"remove","lines":["# Added code start ","import sqlite3 ","from flask import g","","DATABASE = './database.db'","","","def connect_to_database():","    db = sqlite3.connect(DATABASE)","    ","    with db:","        db.execute('CREATE TABLE if not exists messages(pkey integer primary key, firstname ,lastname ,number ,email ,message)')","    return db","","def get_db():","    db = getattr(g, '_database', None)","    if db is None:","        db = g._database = connect_to_database()","    return db","","@app.teardown_appcontext","def close_connection(exception):","    db = getattr(g, '_database', None)","    if db is not None:","        db.close()","","@app.route('/contact.html', methods=['GET', 'POST'])","def contact():","    ","    if request.method == 'GET':","        return render_template('contact.html')","","    firstname = request.form['firstname']","    lastname = request.form['lastname']","    number = request.form['number']","    email = request.form['email']","    message = request.form['message']","    ","","    db = get_db()","    ","    with db:","        db.execute('INSERT INTO messages(firstname,lastname,number, email, message)VALUES(?,?,?,?,?)', (firstname,lastname,number,email,message))","","    return redirect('ThankYou.html')","",""],"id":2}],[{"start":{"row":0,"column":0},"end":{"row":26,"column":7},"action":"insert","lines":["<!doctype html>","<html lang=\"en\">","<head>","    <meta charset=\"UTF-8\">","    <title>A very simple form</title>","</head>","<body>","<form action=\"\" method=\"post\">","    <label for=\"nameId\">Name:</label>","    <br>","    <input type=\"text\" name=\"name\" id=\"nameId\">","    <br>","    <label for=\"commentsId\">Comments:</label>","    <br>","    <textarea name=\"comments\" id=\"commentsId\" cols=\"30\" rows=\"10\"></textarea>","    <br>","    <input type=\"submit\" value=\"Submit\">","</form>","","{% if name %}","    <p> Your name is: {{ name }}</p>","    <p>and your comments are: {{ comments }}</p>","    <p>A big thank you!</p>","{% endif %}","","</body>","</html>"],"id":3}]]},"ace":{"folds":[],"scrolltop":93,"scrollleft":0,"selection":{"start":{"row":26,"column":7},"end":{"row":26,"column":7},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1466623205270,"hash":"3750a3a939971a22bd1a0f26f6b37d586a96eda2"}